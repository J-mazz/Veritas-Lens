# Digital Ocean Managed Database Configuration
# Recommended for production Veritas-Lens deployment

# Database Cluster Configuration
DB_CLUSTER_NAME="veritas-lens-postgres"
DB_ENGINE="postgres"
DB_VERSION="15"
DB_SIZE="db-s-2vcpu-4gb"  # Start small, can scale up
DB_REGION="nyc3"  # Same as your H100 droplet
DB_NODES=1  # Start with 1, scale to 3 for HA

# Database Settings
DB_NAME="veritas_lens"
DB_USER="veritas_admin"
# Password will be auto-generated by DO

# Connection Pool Settings
DB_POOL_SIZE=20
DB_POOL_MODE="transaction"

# Backup Configuration
DB_BACKUP_HOUR=2  # 2 AM UTC
DB_BACKUP_MINUTE=0

# Example doctl command to create managed database:
# doctl databases create $DB_CLUSTER_NAME \
#   --engine $DB_ENGINE \
#   --version $DB_VERSION \
#   --size $DB_SIZE \
#   --region $DB_REGION \
#   --num-nodes $DB_NODES

# Redis Cluster Configuration (optional, for caching)
REDIS_CLUSTER_NAME="veritas-lens-redis"
REDIS_ENGINE="redis"
REDIS_VERSION="7"
REDIS_SIZE="db-s-1vcpu-1gb"
REDIS_REGION="nyc3"
REDIS_NODES=1

# Cost Estimates (monthly):
# PostgreSQL (db-s-2vcpu-4gb): ~$60/month
# Redis (db-s-1vcpu-1gb): ~$30/month
# Total managed DB cost: ~$90/month

# Benefits of Managed Database:
# - Automated backups
# - High availability options
# - Automatic updates
# - Connection pooling
# - SSL encryption
# - Monitoring & alerts
# - Point-in-time recovery
